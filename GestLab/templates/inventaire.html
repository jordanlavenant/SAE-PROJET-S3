{% extends 'base.html' %}
{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static',filename='./css/inventaire.css') }}">
{% endblock %}
{% block content %}
<div class="inventaire-container-overall">
    <div class="header-container">
        <div class="search-content">
            <input type="text" id="search-bar" placeholder="matériel, produits, ustensibles">
            <button id="btn-search">Rechercher</button>
        </div>
        <div class="filter-container">
            <p>trier par : </p>
            <form action="/traiter" method="post">
                <select name="cat" id="categorie-select">
                    <option value="">(aucun)</option>
                    {% for categorie in categories %}
                        <option value="{{ categorie[1] }}" name="{{ categorie[1] }}">{{ categorie[1] }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
    </div>
    <div class="item-container">
        <p id="lenItem" class="{{ items[1] }}" style="display: none;"></p>
        {% for (item,count) in items[0] %}
            <div class="item" id="{{ item[0] }}">
                <div class="item-properties">
                    <h2>{{ item[1] }}</h2>
                    <div class="quantity-container">
                        <p class="quantity-label">Quantité : </p>
                        <p class="quantity">{{ count }} unités</p>
                    </div>
                    <div class="footer-properties">
                        {% if item[0] in alertes.keys() %}
                            <div class="alerts-state">
                                <img id="attention-rouge" src="{{ url_for('static',filename='./images/attention-rouge.png') }}" alt="attention-rouge">
                                <div class="alerts-statement">
                                    <p class="{{ alertes[item[0]] }} alerts_count" id="alerts_count_{{ item[0] }}">{{ alertes[item[0]] }}</p>
                                    {% if alertes[item[0]] > 1%}
                                        <p class="texte_rouge">Alertes</p>
                                    {% else %}
                                        <p class="texte_rouge">Alerte</p>
                                    {% endif %}
                                </div>
                            </div>
                        {% else %}
                            <div></div>
                        {% endif %}
                        <a id="btn-redirect-item" href="{{ url_for('etat',id=item[0]) }}">Détails</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='./js/inventaire.js') }}"></script>
{% endblock %}
